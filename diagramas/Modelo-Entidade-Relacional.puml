@startuml
skinparam linetype ortho
left to right direction
title MODELO ENTIDADE RELACIONAL
!define table(x) class x << (T,#FFAAAA) >>

' Tabelas principais
table(Usuario) {
  <u>id: int[PK]</u>
  nome: varchar[250]
  email: varchar[250]
  token_google: varchar[50]
  data_cadastro: date
  ultimo_acesso: date
  status:  bool
  hierarquia: enum['Cidadao', 'Funcionario', 'Administrador']
}

table(Privilegio){
  <u>id: int[PK]</u>
  nome: varchar[250]
  descricao: varchar[250]
  role: varchar[250]
}

table(UsuarioPrivilegio) {
  <u>usuario_id: int[PK]</u>
  <u>privilegio_id: int[PK]</u>
}

table(Departamento) {
  <u>id: int[PK]</u>
  nome: varchar[250]
  descricao: varchar[250]
}

table(Requisicao) {
  <u>id: int[PK]</u>
  descricao: varchar[250]
  data_criacao: date
  data_atualizacao: date
  status: enum['Analisando', 'Concluido', 'Cancelado']
  prioridade: enum['Baixa', 'Media', 'Alta']
  <u>usuario_id: int[FK]</u>
  <u>departamento_id: int[FK]</u>
}

table(Comentario) {
  <u>id: int[PK]</u>
  texto: varchar[250]
  data_criacao: date
  <u>requisicao_id: int[FK]</u>
  <u>usuario_id: int[FK]</u>
}

table(Arquivo) {
  <u>id: int[PK]</u>
  nome: varchar[250]
  tipo: varchar[250]
  caminho: varchar[250]
  <u>requisicao_id: int[FK]</u>
}



' Enum
enum hierarquia {
    CIDADAO
    FUNCIONARIO
    ADMINISTRADOR
}



enum status{
    ANALISANDO
    CONCLUIDO
    CANCELADO

}

enum prioridade {
    BAIXA
    MEDIA
    ALTA
}

' Relacionamentos
Usuario "1" -- "0..*" Requisicao : cria
Usuario "1" -- "0..*" Comentario : faz
Usuario "1" -- "0..*" UsuarioPrivilegio : tem
Privilegio "1" -- "0..*" UsuarioPrivilegio : possui
Departamento "1" -- "0..*" Requisicao : recebe
Requisicao "1" -- "0..*" Comentario : possui
Requisicao "1" -- "0..*" Arquivo : possui
@enduml
